## 这是一个使用 Python 编写的、功能独特的一体化网络服务工具。它的核心特点是在一个端口上，通过一个单独的 .py 文件，同时提供了两种完全不同的服务。
---

1. **SOCKS5 代理服务（带用户名密码验证）**
2. **伪装的 Web 服务（时区查询页面 + 地图）**

并通过判断连接请求的首字节（`b'\x05'`）来**自动区分并处理 HTTP 请求或 SOCKS5 请求**，从而具备伪装性和实用性。

---

### ✅ 功能简要介绍

#### 1. **SOCKS5 代理部分**

* 监听端口：默认 `8008`（自行在脚本中修改端口）
* 支持 `SOCKS5` 协议，且启用了用户名密码验证（默认用户名为 `admin`，密码为 `addmin`）
* 可转发 IPv4、域名、IPv6 的 TCP 请求
* 实现了数据双向转发（`select` + `recv/sendall`）
* 具备基本认证功能，不通过的连接会被拒绝

#### 2. **HTTP 时区查询页面**

* 支持浏览器访问 `http://ip:8008`
* 可选择常见的时区
* 返回当前该时区时间（使用 `zoneinfo` 实时转换）
* 动态生成 Leaflet 地图，显示对应时区的大致地理位置
* UI 美观简洁，用户访问时就像一个普通的地理查询工具网站

---

### 🛡️ 伪装性分析

此程序的**最大特点是“以假乱真”的伪装能力**：

| 特性            | 描述                                                                                   |
| ------------- | ------------------------------------------------------------------------------------ |
| **混合服务**      | 同一个端口既可处理浏览器访问（HTTP GET），也可处理代理协议连接（SOCKS5），**无需额外端口暴露**                             |
| **正常网页**      | 提供正常内容的 HTML 页面，访问体验自然                                                               |
| **地图与时间查询功能** | 与正常服务无异，**不易引起怀疑**                                                                   |
| **伪装进程名**     | 使用 `setproctitle` 将进程伪装为 `/usr/lib/evolution/evolution-calendar-factory -w`，看起来像系统进程 |
| **控制台日志**     | 输出类似系统服务启动的日志，进一步降低可疑性                                                               |
| **关闭即焚**      | 不记录日志、连接历史等信息，运行状态完全依赖内存，适合“隐秘运行”                                                    |

---

### 🧩 使用场景

* **SOCKS5代理服务**：提供 SOCKS5 出口代理，并伪装为正常 Web 服务

---
